(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{135:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(30),c=n.n(a),s=n(27),i=n(18),u=n(11),o=n(14),l=n.n(o),j=n(16),d=n(28),b=n.n(d),O={login:function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e,t){return function(n){n({type:t,data:e}),setTimeout((function(){n({type:"NO_MESSAGE"})}),4e3)}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUCCESS":return{content:t.data,severity:"success"};case"FAIL":return{content:t.data,severity:"error"};case"NO_MESSAGE":return null;default:return e}},p=function(e){return function(){var t=Object(j.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.login(e);case 3:r=t.sent,n({type:"LOGIN",data:r}),window.localStorage.setItem("loggedUser",JSON.stringify(r)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(h("Invalid username or password","FAIL"));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;default:return e}},x=n(179),g=n(1),m=function(){var e=Object(i.c)((function(e){return e.message.content})),t=Object(i.c)((function(e){return e.message.severity}));return Object(g.jsx)("div",{style:{marginTop:20},children:e&&Object(g.jsx)(x.a,{severity:t,id:"message",children:e})})},y=n(177),w=n(181),k=function(e){var t=e.message,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(""),d=Object(u.a)(o,2),b=d[0],O=d[1],h=Object(i.b)(),f=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),h(p({username:c,password:b})),s(""),O("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Welcome to the Blog List :)"}),Object(g.jsxs)("form",{onSubmit:f,children:[Object(g.jsx)("div",{children:Object(g.jsx)(y.a,{label:"Username",style:{marginBottom:10},id:"username",variant:"standard",value:c,onChange:function(e){var t=e.target;return s(t.value)}})}),Object(g.jsx)("div",{children:Object(g.jsx)(y.a,{label:"Password",style:{marginBottom:20},id:"password",variant:"standard",type:"password",value:b,onChange:function(e){var t=e.target;return O(t.value)}})}),Object(g.jsx)(w.a,{variant:"contained",id:"loginButton",type:"submit",children:"login"})]}),t&&Object(g.jsx)(m,{})]})},S=function(e){var t=e.user,n=Object(i.b)();return Object(g.jsxs)("div",{children:[Object(g.jsxs)("em",{children:["Logged in as ",t.name]}),Object(g.jsx)(w.a,{variant:"outlined",style:{color:"white",borderColor:"white",marginLeft:30},onClick:function(){window.localStorage.clear(),n({type:"LOGOUT"})},children:"Log out"})]})},I=n(184),B=n(185),C=function(e){var t=e.user;return Object(g.jsx)(I.a,{position:"static",style:{marginBottom:30},children:Object(g.jsxs)(B.a,{style:{justifyContent:"space-around"},children:[Object(g.jsx)(w.a,{style:{color:"white"},component:s.b,to:"/",children:"blogs"}),Object(g.jsx)(w.a,{style:{color:"white",marginLeft:20},component:s.b,to:"/users",children:"users"}),Object(g.jsx)(S,{user:t})]})})},A="/api/blogs",L={setConfig:function(e){return{headers:{Authorization:"bearer "+e}}},getAll:function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(A);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(A,t,n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),update:function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat(A,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("".concat(A,"/").concat(t),n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},E=function(e,t){return function(){var n=Object(j.a)(l.a.mark((function n(r){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L.create(e,t);case 2:a=n.sent,r({type:"ADD",data:a}),r(h("added ".concat(a.title," -- ").concat(a.author),"SUCCESS"));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZE":return t.data;case"ADD":return e.concat(t.data);case"UPDATE":var n=e.map((function(e){return e.id===t.data.id?t.data:e}));return n;default:return e}},U=function(e){var t=e.user,n=e.toggleVisibility,a=Object(r.useState)(""),c=Object(u.a)(a,2),s=c[0],o=c[1],d=Object(r.useState)(""),b=Object(u.a)(d,2),O=b[0],f=b[1],p=Object(r.useState)(""),v=Object(u.a)(p,2),x=v[0],m=v[1],k=Object(i.b)(),S=function(){var e=Object(j.a)(l.a.mark((function e(r){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),""===s||""===x?k(h("Must have title and url","FAIL")):(a={title:s,author:O,url:x},n(),c=L.setConfig(t.token),k(E(a,c))),o(""),f(""),m("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"Add new blogs"}),Object(g.jsxs)("form",{onSubmit:S,role:"form",children:[Object(g.jsx)("div",{children:Object(g.jsx)(y.a,{label:"Title",style:{width:500,marginBottom:10,marginTop:-10},variant:"standard","data-testid":"title",id:"title",type:"text",value:s,onChange:function(e){var t=e.target;return o(t.value)}})}),Object(g.jsx)("div",{children:Object(g.jsx)(y.a,{label:"Author",style:{width:500,marginBottom:10},variant:"standard","data-testid":"author",id:"author",type:"text",value:O,onChange:function(e){var t=e.target;return f(t.value)}})}),Object(g.jsx)("div",{children:Object(g.jsx)(y.a,{label:"Url",style:{width:500,marginBottom:20},variant:"standard","data-testid":"url",id:"url",type:"text",value:x,onChange:function(e){var t=e.target;return m(t.value)}})}),Object(g.jsx)(w.a,{variant:"contained",disableElevation:!0,id:"addBlogButton",type:"submit",children:"add blog"}),Object(g.jsx)(w.a,{variant:"outlined",style:{marginLeft:20},onClick:n,children:"cancel"})]})]})},N=n(19),D=n(186),G=n(187),J=n(188),F=n(191),M=n(189),P=n(190),_=function(e){var t=e.blogs,n=Object(N.a)(t).sort((function(e,t){return t.likes-e.likes}));return Object(g.jsx)("div",{style:{marginTop:20},children:Object(g.jsx)(D.a,{children:Object(g.jsxs)(G.a,{"aria-label":"table of blogs",children:[Object(g.jsx)(J.a,{children:Object(g.jsxs)(M.a,{children:[Object(g.jsx)(P.a,{children:"Blog Title"}),Object(g.jsx)(P.a,{children:"Author"})]})}),Object(g.jsx)(F.a,{children:n.map((function(e){return Object(g.jsxs)(M.a,{children:[Object(g.jsx)(P.a,{children:Object(g.jsx)(s.b,{to:"/blogs/".concat(e.id),children:e.title})}),Object(g.jsx)(P.a,{children:e.author})]},e.id)}))})]})})})},z=function(e){var t=e.message,n=e.user,a=e.blogs,c=Object(r.useState)(!1),s=Object(u.a)(c,2),i=s[0],o=s[1],l={display:i?"none":""},j={display:i?"":"none"},d=function(){console.log(i),o(!i)};return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Blogs"}),Object(g.jsx)(w.a,{variant:"contained",style:l,disableElevation:!0,onClick:d,children:"add new blog"}),Object(g.jsx)("div",{style:j,children:Object(g.jsx)(U,{user:n,toggleVisibility:d})}),t&&Object(g.jsx)(m,{}),Object(g.jsx)(_,{blogs:a})]})},V=function(e){var t=e.users;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Users"}),Object(g.jsx)(D.a,{children:Object(g.jsxs)(G.a,{children:[Object(g.jsx)(J.a,{children:Object(g.jsxs)(M.a,{children:[Object(g.jsx)(P.a,{children:"User"}),Object(g.jsx)(P.a,{children:"Number of Blogs Added"})]})}),Object(g.jsx)(F.a,{children:t.map((function(e){return Object(g.jsxs)(M.a,{children:[Object(g.jsx)(P.a,{children:Object(g.jsx)(s.b,{to:"/users/".concat(e.id),children:e.name})}),Object(g.jsx)(P.a,{children:e.blog.length})]},e.id)}))})]})})]})},Z=n(15),W=function(e){var t=e.users,n=Object(Z.g)();if(0===t.length)return null;var r=t.find((function(e){return e.id===n.userId}));return Object(g.jsxs)("div",{children:[Object(g.jsxs)("h2",{children:["Blogs added by ",r.name]}),Object(g.jsx)("ul",{children:r.blog.map((function(e){return Object(g.jsx)("li",{children:Object(g.jsx)(s.b,{to:"/blogs/".concat(e.id),children:e.title})},e.id)}))})]})},q=n(67),H="/api/comments",K={getAll:function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(H);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(H,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Q=function(e){var t=e.blog,n=e.comments,a=e.setComments,c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],o=s[1],d=function(){var e=Object(j.a)(l.a.mark((function e(r){var c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),c={content:i,blog:t.id},e.next=4,K.create(c);case 4:s=e.sent,o(""),a(n.concat(s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("form",{onSubmit:d,children:[Object(g.jsx)("div",{children:Object(g.jsx)(y.a,{type:"text",style:{width:500,marginBottom:20},value:i,onChange:function(e){return o(e.target.value)}})}),Object(g.jsx)(w.a,{variant:"contained",type:"submit",children:"add comment"})]})},R=function(e){var t=e.blog,n=Object(r.useState)(t.comments),a=Object(u.a)(n,2),c=a[0],s=a[1];return Object(g.jsxs)("div",{style:{marginTop:30},children:[Object(g.jsx)("h2",{children:"Comments"}),Object(g.jsx)(Q,{blog:t,comments:c,setComments:s}),Object(g.jsx)("ul",{style:{marginTop:20},children:c.map((function(e){return Object(g.jsx)("li",{children:e.content},e.id)}))})]})},X=n(183),Y=n(84),$=n.n(Y),ee=n(192),te=function(e){var t=e.blogs,n=e.users,r=Object(i.b)(),a=Object(Z.g)();if(0===t.length||0===n.length)return null;var c=t.find((function(e){return e.id===a.blogId})),s=n.find((function(e){return e.id===c.user||e.id===c.user.id}));return Object(g.jsxs)("div",{children:[Object(g.jsxs)("h2",{children:[c.title," -- by ",c.author]}),Object(g.jsx)("div",{style:{marginBottom:10},children:Object(g.jsx)("a",{href:c.url,target:"_blank",rel:"noopener noreferrer",children:c.url})}),Object(g.jsxs)("div",{style:{marginBottom:10},children:[c.likes," likes",Object(g.jsx)(X.a,{variant:"contained",color:"primary",size:"small",style:{marginLeft:10,paddingBottom:10},className:"likeButton",onClick:function(){var e=Object(q.a)(Object(q.a)({},c),{},{likes:c.likes+1});r(function(e,t){return function(){var n=Object(j.a)(l.a.mark((function n(r){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L.update(e,t);case 2:a=n.sent,r({type:"UPDATE",data:a});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e,c.id))},children:Object(g.jsx)($.a,{})})]}),Object(g.jsxs)("div",{style:{marginBottom:30},children:["Added by ",s.name]}),Object(g.jsx)(ee.a,{}),Object(g.jsx)(R,{blog:c})]})},ne={getUsers:function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},re=n(182),ae=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(i.b)(),s=Object(i.c)((function(e){return e.user})),o=Object(i.c)((function(e){return e.message})),d=Object(i.c)((function(e){return e.blogs}));return Object(r.useEffect)((function(){c(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAll();case 2:n=e.sent,t({type:"INITIALIZE",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("loggedUser"));e&&c({type:"LOGIN",data:e})}),[]),Object(r.useEffect)((function(){ne.getUsers().then((function(e){a(e)}))}),[]),Object(g.jsx)(re.a,{style:{width:"80%"},children:null===s?Object(g.jsx)("div",{children:Object(g.jsx)(k,{message:o})}):Object(g.jsxs)("div",{children:[Object(g.jsx)(C,{user:s}),Object(g.jsxs)(Z.c,{children:[Object(g.jsx)(Z.a,{path:"/",element:Object(g.jsx)(z,{message:o,user:s,blogs:d})}),Object(g.jsx)(Z.a,{path:"/users",element:Object(g.jsx)(V,{users:n})}),Object(g.jsx)(Z.a,{path:"/users/:userId",element:Object(g.jsx)(W,{users:n})}),Object(g.jsx)(Z.a,{path:"/blogs/:blogId",element:Object(g.jsx)(te,{blogs:d,users:n})})]})]})})},ce=n(85),se=Object(ce.a)({reducer:{message:f,blogs:T,user:v}});c.a.render(Object(g.jsx)(i.a,{store:se,children:Object(g.jsx)(s.a,{children:Object(g.jsx)(ae,{})})}),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.82f43a0e.chunk.js.map